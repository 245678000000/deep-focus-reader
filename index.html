<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Deep Focus Reader - æ²‰æµ¸å¼è‹±è¯­é˜…è¯»å­¦ä¹ å·¥å…·" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“–</text></svg>" />
  <title>Deep Focus Reader - Module Hub</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Spectral:wght@400;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet" />
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#2c2925",
            "background-light": "#f9f8f4",
            "background-dark": "#1a1918",
            "accent-gold": "#E8DCC5",
            "accent-sienna": "#C25E00"
          },
          fontFamily: {
            display: ["Space Grotesk", "sans-serif"],
            header: ["Spectral", "serif"]
          },
          borderRadius: {
            DEFAULT: "1rem",
            lg: "2rem",
            xl: "3rem",
            full: "9999px"
          }
        }
      }
    };
  </script>
</head>
<body class="min-h-screen bg-background-light text-primary font-display antialiased dark:bg-background-dark dark:text-white">
  <main class="max-w-6xl mx-auto px-5 py-10 sm:py-14">
    <header class="flex items-start justify-between gap-4 mb-10">
      <div>
        <h1 class="font-header text-4xl sm:text-5xl">Deep Focus Reader</h1>
        <p class="mt-3 text-primary/70 dark:text-white/70">æ²‰æµ¸å¼è‹±è¯­é˜…è¯»å­¦ä¹ å·¥å…·ï¼šä¸Šä¼ æ–‡ç«  â†’ è‹±æ–‡æœ—è¯» â†’ åŒè¯­å¯¹ç…§ â†’ ç‚¹è¯æŸ¥è¯ â†’ ç”Ÿè¯å¤ä¹ ã€‚</p>
      </div>
      <button id="themeBtn" class="min-h-[44px] min-w-[44px] h-11 w-11 rounded-full border border-primary/15 dark:border-white/20 hover:scale-105 active:scale-95 transition-all" aria-label="Toggle theme">
        <span class="material-icons-round">dark_mode</span>
      </button>
    </header>

    <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5">
      <a href="./library_dashboard/code.html" class="rounded-2xl border border-primary/10 dark:border-white/15 bg-white/70 dark:bg-white/5 p-5 hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
        <div class="flex items-center gap-2 mb-2"><span class="material-icons-round">library_books</span><h2 class="font-semibold">Library Dashboard</h2></div>
        <p class="text-sm text-primary/70 dark:text-white/70">æˆ‘çš„å›¾ä¹¦é¦†ï¼šæµè§ˆã€æœç´¢ã€ç­›é€‰æ‰€æœ‰å¯¼å…¥çš„æ–‡ç« ï¼Œæ”¯æŒåˆ é™¤å’Œå½’æ¡£ã€‚</p>
      </a>

      <a href="./the_study_reading_view/code.html" class="rounded-2xl border border-primary/10 dark:border-white/15 bg-white/70 dark:bg-white/5 p-5 hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
        <div class="flex items-center gap-2 mb-2"><span class="material-icons-round">auto_stories</span><h2 class="font-semibold">Reading View</h2></div>
        <p class="text-sm text-primary/70 dark:text-white/70">æ ¸å¿ƒé˜…è¯»é¡µï¼šåŒè¯­å¯¹ç…§ã€TTS æœ—è¯»ã€ç‚¹è¯æŸ¥è¯¢æ”¶è—ã€å­—å·è¡Œé«˜è®¾ç½®ã€‚</p>
      </a>

      <a href="./vocabulary_insights_sidebar/code.html" class="rounded-2xl border border-primary/10 dark:border-white/15 bg-white/70 dark:bg-white/5 p-5 hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
        <div class="flex items-center gap-2 mb-2"><span class="material-icons-round">school</span><h2 class="font-semibold">Vocabulary Notebook</h2></div>
        <p class="text-sm text-primary/70 dark:text-white/70">ç”Ÿè¯æœ¬ï¼šæŸ¥çœ‹æ”¶è—çš„å•è¯ã€å‘éŸ³ã€é‡Šä¹‰ï¼Œé—ªå¡å¤ä¹ å·©å›ºã€‚</p>
      </a>

      <a href="./ingest_and_analysis_modal/code.html" class="rounded-2xl border border-primary/10 dark:border-white/15 bg-white/70 dark:bg-white/5 p-5 hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
        <div class="flex items-center gap-2 mb-2"><span class="material-icons-round">upload_file</span><h2 class="font-semibold">Import Text</h2></div>
        <p class="text-sm text-primary/70 dark:text-white/70">ä¸Šä¼  PDF/Word/TXT/EPUB æ–‡ä»¶ï¼Œè‡ªåŠ¨è§£ææå–æ–‡æœ¬å¹¶ç¿»è¯‘ã€‚</p>
      </a>

      <a href="./text_analysis_report/code.html" class="rounded-2xl border border-primary/10 dark:border-white/15 bg-white/70 dark:bg-white/5 p-5 hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
        <div class="flex items-center gap-2 mb-2"><span class="material-icons-round">analytics</span><h2 class="font-semibold">Analysis Report</h2></div>
        <p class="text-sm text-primary/70 dark:text-white/70">æ–‡æœ¬åˆ†ææŠ¥å‘Šæ¼”ç¤ºï¼ˆå¾…æ¥å…¥åŠ¨æ€æ•°æ®ï¼‰ã€‚</p>
      </a>

      <a href="./reading_settings_panel/code.html" class="rounded-2xl border border-primary/10 dark:border-white/15 bg-white/70 dark:bg-white/5 p-5 hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
        <div class="flex items-center gap-2 mb-2"><span class="material-icons-round">text_fields</span><h2 class="font-semibold">Reading Settings</h2></div>
        <p class="text-sm text-primary/70 dark:text-white/70">å­—å·ã€è¡Œé«˜è®¾ç½®é¢æ¿ï¼ˆå·²é›†æˆåˆ°é˜…è¯»é¡µé¢å†…çš„æŠ½å±‰ä¸­ï¼‰ã€‚</p>
      </a>

      <a href="./grammar_analysis_popover/code.html" class="rounded-2xl border border-primary/10 dark:border-white/15 bg-white/70 dark:bg-white/5 p-5 hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
        <div class="flex items-center gap-2 mb-2"><span class="material-icons-round">rule</span><h2 class="font-semibold">Grammar Popover</h2></div>
        <p class="text-sm text-primary/70 dark:text-white/70">è¯­æ³•è§£ææµ®å±‚æ¼”ç¤ºï¼ˆå¾…æ¥å…¥ NLP APIï¼‰ã€‚</p>
      </a>
    </section>

    <section class="mt-8 rounded-2xl border border-primary/10 dark:border-white/15 bg-white/70 dark:bg-white/5 p-5">
      <h3 class="font-semibold mb-2">æœ¬åœ°è¿è¡Œ / éƒ¨ç½²</h3>
      <p class="text-sm text-primary/70 dark:text-white/70">Reading é¡µé¢å·²ä½¿ç”¨ <code>/api/tts-proxy</code> è§£å†³è·¨åŸŸï¼Œå»ºè®®ç”¨ Vercel æ–¹å¼è¿è¡Œï¼š</p>
      <pre class="mt-2 text-sm bg-primary/5 dark:bg-white/10 rounded-xl p-3 overflow-x-auto"><code>cd /Users/tiantian/Downloads/stitch_library_dashboard
npx vercel dev</code></pre>
      <p class="mt-2 text-sm text-primary/70 dark:text-white/70">å¼€å‘åœ°å€ä¸€èˆ¬æ˜¯ï¼š<code>http://localhost:3000</code>ï¼ˆæ§åˆ¶å°ä¼šæ˜¾ç¤ºå®é™…ç«¯å£ï¼‰ã€‚</p>
      <p class="mt-2 text-sm text-primary/70 dark:text-white/70">ä¸Šçº¿ï¼š<code>vercel --prod</code></p>
    </section>
  </main>

  <script>
    (function () {
      const THEME_KEY = "dfr_theme";
      const MIGRATION_KEY = "dfr_migration_v1_done";

      function runMigrationV1() {
        if (localStorage.getItem(MIGRATION_KEY) === "true") return;

        const legacyRaw = localStorage.getItem("dfr_last_imported");
        if (legacyRaw) {
          try {
            const legacy = JSON.parse(legacyRaw);
            const text = String(legacy.text || legacy.content || "").trim();
            if (text) {
              const article = {
                id: `article_${Date.now()}`,
                title: String(legacy.title || "Imported Text"),
                text,
                translations: legacy.translations && typeof legacy.translations === "object" ? legacy.translations : {},
                createdAt: legacy.createdAt || new Date().toISOString(),
                progress: Number(legacy.progress || 0),
                status: legacy.status || "in_progress",
                lastSentenceIndex: Number(legacy.lastSentenceIndex || 0),
                updatedAt: new Date().toISOString()
              };
              localStorage.setItem(article.id, JSON.stringify(article));
            }
          } catch (_error) {
            // ignore
          }
        }

        localStorage.setItem(MIGRATION_KEY, "true");
      }

      function applyTheme() {
        if (localStorage.getItem(THEME_KEY) === "dark") {
          document.documentElement.classList.add("dark");
        } else {
          document.documentElement.classList.remove("dark");
        }
      }

      runMigrationV1();
      applyTheme();

      document.getElementById("themeBtn").addEventListener("click", () => {
        const isDark = document.documentElement.classList.toggle("dark");
        localStorage.setItem(THEME_KEY, isDark ? "dark" : "light");
      });
    })();
  </script>
</body>
</html>
